let trongateMXOpeningModal=!1;!function(e){"use strict";let t={CORE_MX_ATTRIBUTES:["mx-get","mx-post","mx-put","mx-delete","mx-patch","mx-remove"],REQUIRES_DATA_ATTRIBUTES:["mx-post","mx-put","mx-patch"],DEFAULT_TIMEOUT:1e4,POLLING_INTERVALS:new WeakMap},r=0,i,l,a={parseAttributeValue(e){if(!(e=e.trim()).startsWith("{")&&!e.startsWith("["))return e;try{return JSON.parse(e)}catch(t){return console.error("Error parsing attribute value:",t),!1}},escapeHtml:e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),getAttributeValue(e,t){if(e.hasAttribute(t))return e.getAttribute(t);let r=e.parentElement;for(;r;){if(r.hasAttribute(t))return r.getAttribute(t);r=r.parentElement}return null},parsePollingInterval(e){let t=e.match(/^(\d+)(s|m|h|d)$/);if(!t)return null;let r=parseInt(t[1],10),i=t[2];switch(i){case"s":return 1e3*r;case"m":return 6e4*r;case"h":return 36e5*r;case"d":return 864e5*r}},canMakeRequest(e){let t=Date.now();return t-r>=e&&(r=t,!0)},parseUrlWithPlaceholders:(e,t)=>e.replace(/\$\{([^}]+)\}/g,(e,r)=>"this.value"===r?t.value:e),pushUrl(t){let r=this.normalizeUrl(t);r&&e.location.href!==r&&history.pushState({},"",r)},getRequestUrl(e){for(let r of t.CORE_MX_ATTRIBUTES){let i=e.getAttribute(r);if(i)return i=this.processDynamicUrl(i,e),this.normalizeUrl(i)}return null},processDynamicUrl:(e,t)=>e.replace(/\${([^}]+)}/g,(e,r)=>"this.value"===r?t.value:e),normalizeUrl(t){if(t.startsWith("http://")||t.startsWith("https://"))return t;let r=document.querySelector("base"),i=r?r.href:e.location.origin+"/";return t.startsWith(i)?t:(i.endsWith("/")&&t.startsWith("/")&&(t=t.substring(1)),i.replace(/\/?$/,"/")+t.replace(/^\//,""))},createMXEvent(e,t,r,i={}){let l=e.closest("button, form")||e;return{target:l,type:r,detail:{element:l,originalEvent:t,...i}}},executeMXFunction(t,r){if(!t)return;let i=t.replace(/\(\)$/,""),l;if(i.includes(".")){let[a,n]=i.split("."),s=e[a];if(s&&"object"==typeof s&&s[n]&&"function"==typeof s[n])l=s[n].bind(s);else{console.warn(`Object or method not found: ${i}`);return}}else l=e[i];if("function"==typeof l)try{l(r)}catch(o){console.error(`Error executing ${i}:`,o)}else console.warn(`Function ${i} not found`)}},n={setupHttpRequest(e,r){let i=e.getAttribute(r);i=a.parseUrlWithPlaceholders(i,e),i=a.normalizeUrl(i);let l=r.replace("mx-","").toUpperCase();s.attemptActivateLoader(e);let n=new XMLHttpRequest;return n.open(l,i),n.setRequestHeader("Trongate-MX-Request","true"),n.timeout=t.DEFAULT_TIMEOUT,n},setMXHeaders(e,t){let r=t.getAttribute("mx-token");r&&e.setRequestHeader("trongateToken",r);let i=t.getAttribute("mx-headers");if(i){let l=a.parseAttributeValue(i);l&&"object"==typeof l?Object.entries(l).forEach(([t,r])=>{e.setRequestHeader(t,r)}):console.error("Error parsing mx-headers attribute.")}},setMXHandlers(e,t){e.onerror=function(){s.attemptHideLoader(t),console.error("Request failed")},e.ontimeout=function(){s.attemptHideLoader(t),console.error("Request timed out")}},commonHttpRequest(e,t,r=null){let i=n.setupHttpRequest(e,t);n.setMXHeaders(i,e),n.setMXHandlers(i,e);let l=null!==r,o;o=l?new FormData(r):new FormData;let d=l&&r.getAttribute("mx-vals")||e.getAttribute("mx-vals");if(d){let c=a.parseAttributeValue(d);c&&"object"==typeof c&&Object.entries(c).forEach(([e,t])=>{o.append(e,t)})}let u=s.processMXDomVals(e);Object.entries(u).forEach(([e,t])=>{o.append(e,t)});let m;return m=r&&!e.hasAttribute(t)?s.establishTargetElement(r):s.establishTargetElement(e),s.handleMxDuringRequest(e,m),{http:i,formData:o,targetElement:m}},invokeFormPost(e,t,r,i,l){let{http:a,formData:o,targetElement:d}=n.commonHttpRequest(e,r,i);a.onload=function(){s.attemptHideLoader(i);let t=a.status>=200&&a.status<300,o=t&&!e.hasAttribute(r);o&&i.reset();let d=e.hasAttribute(r)?e:i;n.handleHttpResponse(a,d,l)};try{a.send(o)}catch(c){s.attemptHideLoader(i),console.error("Error sending form request:",c)}},initInvokeHttpRequest(e,t,r){let i=e.getAttribute("mx-build-modal");if(i){let l=a.parseAttributeValue(i);if(!1===l){console.warn("Invalid JSON in mx-build-modal:",i);return}"string"==typeof l?o.buildMXModal({id:l},e,t,r):o.buildMXModal(l,e,t,r)}else n.invokeHttpRequest(e,t,r)},invokeHttpRequest(e,t,r){let{http:i,formData:l,targetElement:o}=n.commonHttpRequest(e,t);i.setRequestHeader("Accept","text/html"),i.onload=function(){if(s.attemptHideLoader(e),n.handleHttpResponse(i,e,r),"true"===e.getAttribute("mx-push-url")&&i.status>=200&&i.status<300){let t=a.getRequestUrl(e);a.pushUrl(t)}};try{i.send(l)}catch(d){s.attemptHideLoader(e),console.error("Error sending request:",d)}},handleHttpResponse(t,r,i){s.removeCloak(),s.restoreOriginalContent(),s.reEnableDisabledElements(),r.classList.remove("blink");let l="true"===r.getAttribute("mx-redirect-on-success"),n="true"===r.getAttribute("mx-redirect-on-error"),c=t.status>=200&&t.status<300,u=t.responseText.trim();if((c&&l||!c&&n)&&u&&!u.startsWith("{")&&!u.startsWith("[")&&!u.includes("<")){e.location.href=a.normalizeUrl(u);return}if(c){t.getResponseHeader("Content-Type");let m=s.establishTargetElement(r),p=r.getAttribute("mx-select-oob");if(p){let g=document.createDocumentFragment(),h=document.createElement("div");if(h.innerHTML=t.responseText,g.appendChild(h),s.handleOobSwaps(g,p),!m&&r.hasAttribute("mx-after-swap")){let b=r.getAttribute("mx-after-swap");if(b){let f=a.createMXEvent(r,i,"afterSwap",{http:t});a.executeMXFunction(b,f)}}}let A=r.getAttribute("mx-animate-success");if(A&&m?d.initAnimateSuccessWithCallback(m,t,r,()=>{o.initAttemptCloseModal(m,t,r),this.updateContent(m,t,r,i)}):m&&(o.initAttemptCloseModal(m,t,r),this.updateContent(m,t,r,i)),"true"===r.getAttribute("mx-push-url")){let x=a.getRequestUrl(r);a.pushUrl(x)}this.attemptInitOnSuccessActions(t,r)}else this.handleErrorResponse(t,r);s.attemptHideLoader(r)},updateContent(e,t,r,i){let l=t.getResponseHeader("Content-Type");if(l.includes("text/html"))s.populateTargetEl(e,t,r);else if(l.includes("application/json"))try{let n=JSON.parse(t.responseText);e.textContent=JSON.stringify(n,null,2)}catch(o){console.error("Error parsing JSON response:",o)}else l.startsWith("image/")?e.style.backgroundImage=`url('${t.responseURL}')`:e.textContent=t.responseText;let d=r.getAttribute("mx-after-swap");if(d){let c=a.createMXEvent(r,i,"afterSwap",{http:t});a.executeMXFunction(d,c)}},handleErrorResponse(e,t){console.error("Request failed with status:",e.status);let r=t.closest("form");r&&this.attemptDisplayValidationErrors(e,t,r);let i=t.getAttribute("mx-animate-error");if(i)d.initAnimateError(t,e,t);else{let l=s.establishTargetElement(t);o.initAttemptCloseModal(l,e,t),this.attemptInitOnErrorActions(e,t)}},attemptInitOnErrorActions(e,t){let r=t.getAttribute("mx-on-error");if(r){let i=document.querySelector(r);s.handlePageLoadedEvents(i)}},attemptInitOnSuccessActions(e,t){let r=t.getAttribute("mx-on-success");if(r){let i=document.querySelector(r);s.handlePageLoadedEvents(i)}},attemptDisplayValidationErrors(e,t,r){if(401!==e.status&&402!==e.status&&403!==e.status&&e.status>=400&&e.status<=499)try{if(r.classList.contains("highlight-errors")){let i=JSON.parse(e.responseText);s.handleValidationErrors(r,i)}}catch(l){console.error("Error parsing validation errors:",l)}}},s={processedIndicators:new Set,indicatorObserver:null,initializeIndicatorObserver(){this.indicatorObserver||(this.indicatorObserver=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&(e.classList?.contains("mx-indicator")&&this.initializeSingleIndicator(e),e.querySelectorAll?.(".mx-indicator")?.forEach(e=>{this.initializeSingleIndicator(e)}))}),e.removedNodes.forEach(e=>{1===e.nodeType&&(e.classList?.contains("mx-indicator")&&this.processedIndicators.delete(e),e.querySelectorAll?.(".mx-indicator")?.forEach(e=>{this.processedIndicators.delete(e)}),t.POLLING_INTERVALS.has(e)&&c.stopPolling(e))})})}),this.indicatorObserver.observe(document.body,{childList:!0,subtree:!0}))},initializeSingleIndicator(e){!e||this.processedIndicators.has(e)||(this.hideLoader(e),e.style.display="",this.processedIndicators.add(e))},handleMxDuringRequest(e,t){let r=e.getAttribute("mx-target-loading");if(r){if("cloak"===r)t.style.setProperty("opacity","0","important"),t.classList.add("mx-cloak");else{let i=document.querySelector(r);i&&(t.dataset.mxOriginalContent=t.innerHTML,t.innerHTML=i.innerHTML,t.classList.add("mx-placeholder-active"))}}"form"===e.tagName.toLowerCase()&&Array.from(e.elements).forEach(e=>{e.disabled||(e.disabled=!0,e.classList.add("mx-temp-disabled"))})},establishTargetElement(e){let t=a.getAttributeValue(e,"mx-target");if(!t||"this"===t)return e;if("none"===t)return null;if("body"===t)return document.body;if(t.startsWith("closest ")){let r=t.replace("closest ","");return e.closest(r)}if(t.startsWith("find ")){let i=t.replace("find ","");return e.querySelector(i)}return document.querySelector(t)},attemptActivateLoader(e){let t=e.getAttribute("mx-indicator");if(t){let r=document.querySelector(t);r&&(r.style.removeProperty("display"),r.classList.remove("mx-indicator-hidden"),r.classList.add("mx-indicator"))}},attemptHideLoader(e){let t=a.getAttributeValue(e,"mx-indicator");if(t){let r=document.querySelector(t);r&&s.hideLoader(r)}},hideLoader(e){e&&e.classList.contains("mx-indicator")&&(e.classList.remove("mx-indicator"),e.classList.add("mx-indicator-hidden"))},processMXDomVals(e){let t=e.getAttribute("mx-dom-vals")||e.getAttribute("mx-dom-values");if(!t)return{};let r=a.parseAttributeValue(t);if(!r||"object"!=typeof r)return{};let i={};return Object.entries(r).forEach(([e,t])=>{if("object"==typeof t&&t.selector&&t.property){let r=document.querySelector(t.selector);r&&(i[e]=r[t.property])}}),i},populateTargetEl(e,t,r){let i=r.getAttribute("mx-select"),l=s.establishSwapStr(r),a=r.getAttribute("mx-select-oob"),n=document.createDocumentFragment(),d=document.createElement("div");d.innerHTML=t.responseText,n.appendChild(d);try{s.handleOobSwaps(n,a),s.handleMainSwaps(e,n,i,l),o.attemptAddModalButtons(e,r)}catch(c){console.error("Error in populateTargetEl:",c)}finally{d.innerHTML="",n.textContent=""}},handleMainSwaps(e,t,r,i){(r?t.querySelectorAll(r):[t.firstChild]).forEach(t=>{t&&s.swapContent(e,t,i)})},handleOobSwaps(e,t){if(!t)return;let r=a.parseAttributeValue(t);if("string"==typeof r){let i=r.split(/,(?![^[]*\])/);i.forEach(t=>{let[r,i]=t.trim().split(":");this.performOobSwap(e,{select:r,target:i,swap:"innerHTML"})})}else Array.isArray(r)?r.forEach(t=>this.performOobSwap(e,t)):"object"==typeof r&&null!==r?this.performOobSwap(e,r):console.error("Invalid mx-select-oob syntax:",t)},performOobSwap(e,{select:t,target:r,swap:i="innerHTML"}){let l=e.querySelector(t);if(!l){console.error(`Source element not found: ${t}`);return}let a=document.querySelector(r);if(!a){console.error(`Target element not found: ${r}`);return}this.swapContent(a,l.cloneNode(!0),i)},swapContent(e,t,r){let i="string"==typeof t?t:t.outerHTML||t.innerHTML,l=this.removeOutermostDiv(i);switch(r){case"outerHTML":e.outerHTML=l;break;case"textContent":e.textContent=l;break;case"beforebegin":e.insertAdjacentHTML("beforebegin",l);break;case"afterbegin":e.insertAdjacentHTML("afterbegin",l);break;case"beforeend":e.insertAdjacentHTML("beforeend",l);break;case"afterend":e.insertAdjacentHTML("afterend",l);break;case"delete":e.remove();break;case"value":"value"in e?e.value=l:(console.warn("Target element does not support value property"),e.innerHTML=l);break;case"none":break;default:e.innerHTML=l}},removeOutermostDiv(e){let t=document.createElement("div");if(t.innerHTML=e.trim(),t.firstElementChild&&"div"===t.firstElementChild.tagName.toLowerCase()){let r=t.firstElementChild;for(;r.firstChild;)t.insertBefore(r.firstChild,r);t.removeChild(r)}return t.innerHTML},handleValidationErrors(e,t){e.querySelectorAll(".form-field-validation-error").forEach(e=>e.classList.remove("form-field-validation-error")),e.querySelectorAll(".validation-error-report").forEach(e=>e.remove());let r=null;t.forEach(t=>{let i=e.querySelector(`[name="${t.field}"]`);if(i){i.classList.add("form-field-validation-error");let l=document.createElement("div");l.className="validation-error-report",t.messages.forEach(e=>{let t=document.createElement("div");t.innerHTML="â— "+a.escapeHtml(e),l.appendChild(t)});let n=i.closest(".flex-row");if(n&&(e===n||e.contains(n))){let s=i.previousElementSibling;for(;s&&"label"!==s.tagName.toLowerCase()&&!s.tagName.toLowerCase().match(/(input|select|textarea)/)&&null!==s;)s=s.previousElementSibling;if(s&&"label"===s.tagName.toLowerCase())null.parentNode.insertBefore(l,null.nextSibling);else{let o=i.closest(".flex-row");o&&e.contains(o)?o.parentNode.insertBefore(l,o):e.parentNode.insertBefore(l,e)}}else i.parentNode.insertBefore(l,i);if(r||(r=i),"checkbox"===i.type||"radio"===i.type){let d=i.closest("div");d&&(d.classList.add("form-field-validation-error"),d.style.textIndent="7px")}}}),r&&setTimeout(()=>{r.scrollIntoView({behavior:"smooth",block:"center"})},100);let i=e.getAttribute("mx-after-validation");if(i){let l=a.createMXEvent(e,event,"afterValidation",{validationErrors:t});a.executeMXFunction(i,l)}},removeCloak(){document.querySelectorAll(".mx-cloak").forEach(e=>{e.classList.remove("mx-cloak"),"0"===e.style.opacity&&e.style.removeProperty("opacity")})},restoreOriginalContent(){document.querySelectorAll(".mx-placeholder-active").forEach(e=>{e.dataset.mxOriginalContent&&(e.innerHTML=e.dataset.mxOriginalContent,delete e.dataset.mxOriginalContent),e.classList.remove("mx-placeholder-active")})},reEnableDisabledElements(){document.querySelectorAll(".mx-temp-disabled").forEach(e=>{e.disabled=!1,e.classList.remove("mx-temp-disabled")})},establishSwapStr(e){let t=a.getAttributeValue(e,"mx-swap");return t||"innerHTML"},handlePageLoadedEvents(e){let r=t.CORE_MX_ATTRIBUTES.find(t=>e.hasAttribute(t));r&&(event.preventDefault(),c.initInvokeHttpRequest(e,r))},clearExistingValidationErrors(e){let t=document.querySelector(".validation-error-alert");t&&t.remove(),e.querySelectorAll(".validation-error-report").forEach(e=>e.remove()),e.querySelectorAll(".form-field-validation-error").forEach(e=>e.classList.remove("form-field-validation-error"))},setChildrenOpacity(e,t){let r=parseFloat(t);if(isNaN(r)||r<0||r>1)throw Error("Invalid opacity value. It must be a number between 0 and 1.");let i=Array.from(e.children);i.forEach(e=>{e.style.opacity=t})}},o={buildMXModal(e,t,r,i){let l=t.closest(".modal");l&&closeModal();let a="string"==typeof e?e:e.id,s=document.getElementById(a);s&&s.remove();let o=document.createElement("div");if(o.className="modal",o.id=a,o.style.display="none","object"==typeof e&&e.modalHeading){let d=document.createElement("div");d.className="modal-heading";let c=!e.renderCloseIcon||e.renderCloseIcon;if(!1===c||"false"===c)d.innerHTML=e.modalHeading;else{d.classList.add("flex-row"),d.classList.add("align-center"),d.classList.add("justify-between");let u=document.createElement("div");u.innerHTML=e.modalHeading,d.appendChild(u);let m=document.createElement("div"),p=null!==document.querySelector('link[href*="font-awesome"]')||null!==document.querySelector(".fa-times");if(p){let g=document.createElement("i");g.classList.add("fa","fa-times"),g.style.cursor="pointer",g.setAttribute("onclick","closeModal()"),m.appendChild(g)}else{let h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("width","16"),h.setAttribute("height","16"),h.setAttribute("viewBox","0 0 100 100"),h.setAttribute("fill","currentColor"),h.setAttribute("class","bi bi-x"),h.style.cursor="pointer";let b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("transform","rotate(45, 50, 50)");let f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("x","38"),f.setAttribute("y","0"),f.setAttribute("width","24"),f.setAttribute("height","100"),f.setAttribute("rx","12"),f.setAttribute("ry","12");let A=document.createElementNS("http://www.w3.org/2000/svg","rect");A.setAttribute("x","0"),A.setAttribute("y","38"),A.setAttribute("width","100"),A.setAttribute("height","24"),A.setAttribute("rx","12"),A.setAttribute("ry","12"),b.appendChild(f),b.appendChild(A),h.appendChild(b),h.setAttribute("onclick","closeModal()"),m.appendChild(h)}d.appendChild(m)}o.appendChild(d)}let x=document.createElement("div");x.className="modal-body";let $=document.createElement("div");if($.setAttribute("class","spinner mt-3 mb-3"),x.appendChild($),o.appendChild(x),"object"==typeof e&&e.modalFooter){let v=document.createElement("div");v.className="modal-footer",v.innerHTML=e.modalFooter,o.appendChild(v)}document.body.appendChild(o),this.openModal(a,e);let y=document.getElementById(a);"object"==typeof e&&e.width&&(y.style.maxWidth=e.width),t.hasAttribute("mx-target")&&t.removeAttribute("mx-target");let E=`#${a} .modal-body`;t.setAttribute("mx-target",E),n.invokeHttpRequest(t,r,i)},attemptAddModalButtons(e,t){if(t.hasAttribute("mx-build-modal")){let r=t.getAttribute("mx-build-modal"),i=a.parseAttributeValue(r);if(!1===i){console.warn("Failed to parse mx-build-modal attribute:",r);return}let l=document.createElement("p");l.setAttribute("class","text-center");let n=!1;if("object"==typeof i){if(i.hasOwnProperty("showCloseButton")){let s=document.createElement("button");s.setAttribute("class","alt"),s.innerText="Close",s.setAttribute("onclick","closeModal()"),l.appendChild(s),n=!0}if(i.hasOwnProperty("showDestroyButton")){let d=document.createElement("button");d.setAttribute("class","alt"),d.innerText="Close",d.addEventListener("click",function(){o.closeModal();let e=this.closest(".modal");e&&e.remove()}),l.appendChild(d),n=!0}}n&&e.appendChild(l)}},initAttemptCloseModal(t,r,i){if(r.status>=200&&r.status<300){let l=i.getAttribute("mx-close-on-success");if("true"===l){e.closeModal();return}}else{let a=i.getAttribute("mx-close-on-error");"true"===a&&e.closeModal()}},openModal(e,t){trongateMXOpeningModal=!0,setTimeout(()=>{trongateMXOpeningModal=!1},333);let r=document.body,i;if(null==document.getElementById("overlay")){let l=document.createElement("div");l.setAttribute("id","modal-container"),l.setAttribute("class","mx-modal-container"),l.setAttribute("style","z-index: 3;"),r.prepend(l);let a=document.createElement("div");a.setAttribute("id","overlay"),a.setAttribute("style","z-index: 2"),r.prepend(a);let n=document.getElementById(e);n.removeAttribute("style"),n.setAttribute("class","modal"),n.setAttribute("id",e),n.style.zIndex=4,l.appendChild(n);let s="object"==typeof t&&(t.marginTop||t["margin-top"])||"12vh";setTimeout(()=>{n.style.opacity=1,n.style.marginTop=s},0)}}},d={initAnimateSuccessWithCallback(e,t,r,i){let l=this.estAnimationContainer(e,r),a=l.children,n=document.createElement("div");n.setAttribute("class","mx-temp-container cloak");let s=document.body;for(s.appendChild(n);a.length>0;)n.appendChild(a[0]);this.mxDrawBigTick(l),setTimeout(()=>{this.mxDestroyAnimation(l),i&&"function"==typeof i&&i()},1300)},initAnimateSuccess(e,t,r){this.initAnimateSuccessWithCallback(e,t,r,()=>{o.initAttemptCloseModal(e,t,r)})},initAnimateError(e,t,r){let i=this.estAnimationContainer(e,r),l=i.children,a=document.createElement("div");a.setAttribute("class","mx-temp-container cloak");let n=document.body;for(n.appendChild(a);l.length>0;)a.appendChild(l[0]);this.mxDrawBigCross(i),setTimeout(()=>{this.mxDestroyAnimation(i),o.initAttemptCloseModal(e,t,r)},1300)},estAnimationContainer(e,t){let r=e,i=t.closest(".modal");if(i){let l=i.querySelector(".modal-body");r=l}else{let a=t.closest("form");a&&(r=a)}return r},mxDrawBigCross(e){let t=document.createElement("div");t.setAttribute("style","display: none");let r=document.createElement("div");r.setAttribute("class","mx-trigger"),t.appendChild(r);let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("version","1.1"),i.setAttribute("id","mx-cross"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 37 37"),i.setAttribute("xml:space","preserve"),t.appendChild(i);let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("class","mx-circ path"),l.setAttribute("style","fill:none;stroke:#cc0000;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10"),l.setAttribute("d","M30.5,6.5L30.5,6.5c6.6,6.6,6.6,17.4,0,24l0,0c-6.6,6.6-17.4,6.6-24,0l0,0c-6.6-6.6-6.6-17.4,0-24l0,0C13.1-0.2,23.9-0.2,30.5,6.5z"),i.appendChild(l);let a=document.createElementNS("http://www.w3.org/2000/svg","polyline");a.setAttribute("class","mx-tick path"),a.setAttribute("style","fill:none;stroke:#cc0000;stroke-width:3;"),a.setAttribute("points","11.1,10 25.4,27.2"),i.appendChild(a);let n=document.createElementNS("http://www.w3.org/2000/svg","polyline");n.setAttribute("class","mx-cross path"),n.setAttribute("style","fill:none;stroke:#cc0000;stroke-width:3;"),n.setAttribute("points","24.1,10 12.4,27.2"),i.appendChild(n),e.appendChild(t),t.style.display="flex",setTimeout(()=>{let e=document.getElementsByClassName("mx-trigger")[0];e.classList.add("mx-drawn")},100)},mxDrawBigTick(e){let t=document.createElement("div");t.setAttribute("style","display: none");let r=document.createElement("div");r.setAttribute("class","mx-trigger"),t.appendChild(r);let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("version","1.1"),i.setAttribute("id","mx-tick"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 37 37"),i.setAttribute("xml:space","preserve"),t.appendChild(i);let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("class","mx-circ path"),l.setAttribute("style","fill:none;stroke:#007700;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10"),l.setAttribute("d","M30.5,6.5L30.5,6.5c6.6,6.6,6.6,17.4,0,24l0,0c-6.6,6.6-17.4,6.6-24,0l0,0c-6.6-6.6-6.6-17.4,0-24l0,0C13.1-0.2,23.9-0.2,30.5,6.5z"),i.appendChild(l);let a=document.createElementNS("http://www.w3.org/2000/svg","polyline");a.setAttribute("class","mx-tick path"),a.setAttribute("style","fill:none;stroke:#007700;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10;"),a.setAttribute("points","11.6,20 15.9,24.2 26.4,13.8"),i.appendChild(a),e.appendChild(t),t.style.display="flex",setTimeout(()=>{let e=document.getElementsByClassName("mx-trigger")[0];e.classList.add("mx-drawn")},100)},mxDestroyAnimation(e){for(;e.firstChild;)e.removeChild(e.firstChild);let t=document.querySelector(".mx-temp-container");if(t){let r=t.children;for(;r.length>0;)e.appendChild(r[0]);t.remove()}}},c={initializeTrongateMX(){s.initializeIndicatorObserver(),document.querySelectorAll(".mx-indicator").forEach(e=>{s.initializeSingleIndicator(e)}),["click","dblclick","change","submit","keyup","keydown","focus","blur","input"].forEach(e=>{document.body.removeEventListener(e,c.handleTrongateMXEvent),document.body.addEventListener(e,c.handleTrongateMXEvent)}),document.querySelectorAll('[mx-trigger*="load"]').forEach(s.handlePageLoadedEvents),c.attemptInitPolling(),e.addEventListener("popstate",c.handlePopState)},async handleTrongateMXEvent(e){let r=e.target.closest("["+t.CORE_MX_ATTRIBUTES.join("],[")+"]");if(!r)return;let i=c.establishTriggerEvent(r);if(i!==e.type)return;e.preventDefault();let l=r.getAttribute("mx-on-trigger");if(l){let n=a.createMXEvent(r,e,"trigger");try{await a.executeMXFunction(l,n)}catch(s){console.error(`Error executing ${l}:`,s);return}}let o=parseInt(r.getAttribute("mx-throttle"))||0;if(o>0&&!a.canMakeRequest(o)){console.log("Request throttled");return}let d=t.CORE_MX_ATTRIBUTES.find(e=>r.hasAttribute(e)),u=!1;if(d&&"mx-remove"!==d&&(u=!0,("form"===r.tagName.toLowerCase()||r.closest("form"))&&"mx-get"!==d?c.mxSubmitForm(r,i,d,e):("select"===r.tagName.toLowerCase()&&"mx-get"===d&&r.getAttribute("mx-trigger"),c.initInvokeHttpRequest(r,d,e))),r.hasAttribute("mx-remove")){let m=r.getAttribute("mx-remove");setTimeout(()=>{if("true"===m){let e=r.parentElement;e&&e.remove()}else{let t=r.closest(m);t&&t.remove()}},0)}u||r.hasAttribute("mx-remove")||(("form"===r.tagName.toLowerCase()||r.closest("form"))&&"mx-get"!==d?c.mxSubmitForm(r,i,d,e):("select"===r.tagName.toLowerCase()&&"mx-get"===d&&r.getAttribute("mx-trigger"),c.initInvokeHttpRequest(r,d,e)))},establishTriggerEvent(e){let t=e.getAttribute("mx-trigger");if("activate"===t)return"__ACTIVATE__";if(t)return t;let r=e.tagName.toLowerCase();switch(r){case"form":return"submit";case"input":return"text"===e.type?"input":"change";case"textarea":case"select":return"change";default:return"click"}},mxSubmitForm(e,r,i,l){let a=e.closest("form");if(!a){console.error("No containing form found");return}s.clearExistingValidationErrors(a),t.REQUIRES_DATA_ATTRIBUTES.includes(i)?n.invokeFormPost(e,r,i,a,l):c.initInvokeHttpRequest(a,i,l)},initInvokeHttpRequest(e,t){let r=e.getAttribute("mx-build-modal");if(r){let i=a.parseAttributeValue(r);if(!1===i){console.warn("Invalid JSON in mx-build-modal:",r);return}"string"==typeof i?o.buildMXModal({id:i},e,t):o.buildMXModal(i,e,t)}else n.invokeHttpRequest(e,t)},attemptInitPolling(){let e=document.querySelectorAll("[mx-trigger]");e.forEach(e=>{let t=e.getAttribute("mx-trigger");c.setupPolling(e,t)})},setupPolling(e,r){c.stopPolling(e);let i=r.match(/^every\s+(\d+[smhd])$/);if(i){let l=a.parsePollingInterval(i[1]);if(l){let n=setInterval(()=>c.pollElement(e),l);t.POLLING_INTERVALS.set(e,n)}return}let s=r.match(/^load\s+delay:(\d+[smhd])$/);if(s){let o=a.parsePollingInterval(s[1]);if(o){let d=setTimeout(()=>{c.pollElement(e);let r=setInterval(()=>c.pollElement(e),o);t.POLLING_INTERVALS.set(e,r)},o);t.POLLING_INTERVALS.set(e,{timeoutId:d})}return}let u=r.match(/^load\s+delay:(\d+[smhd]),\s*every\s+(\d+[smhd])$/);if(u){let m=a.parsePollingInterval(u[1]),p=a.parsePollingInterval(u[2]);if(m&&p){let g=setTimeout(()=>{c.pollElement(e);let r=setInterval(()=>c.pollElement(e),p);t.POLLING_INTERVALS.set(e,r)},m);t.POLLING_INTERVALS.set(e,{timeoutId:g})}return}},startPolling(e,r="5s"){if(!e)return console.error("startPolling: No element provided"),!1;c.stopPolling(e);let i=a.parsePollingInterval(r);if(!i)return console.error(`startPolling: Invalid interval format: ${r}`),!1;["mx-get","mx-select-oob","mx-target"].forEach(t=>{e.hasAttribute(t)&&e.setAttribute(`data-original-${t}`,e.getAttribute(t))}),e.setAttribute("mx-trigger","polling");let l=setInterval(()=>c.pollElement(e),i);return t.POLLING_INTERVALS.set(e,l),e.setAttribute("data-polling-active","true"),!0},stopPolling(e){let r=t.POLLING_INTERVALS.get(e);return!!r&&("number"==typeof r?clearInterval(r):r&&"object"==typeof r&&r.timeoutId&&clearTimeout(r.timeoutId),t.POLLING_INTERVALS.delete(e),["mx-get","mx-select-oob","mx-target"].forEach(t=>{let r=`data-original-${t}`;e.hasAttribute(r)&&(e.setAttribute(t,e.getAttribute(r)),e.removeAttribute(r))}),e.hasAttribute("data-original-mx-trigger")?(e.setAttribute("mx-trigger",e.getAttribute("data-original-mx-trigger")),e.removeAttribute("data-original-mx-trigger")):e.removeAttribute("mx-trigger"),e.removeAttribute("data-polling-active"),!0)},stopAllPolling(){t.POLLING_INTERVALS.forEach((e,t)=>{"number"==typeof e?clearInterval(e):e&&"object"==typeof e&&e.timeoutId&&clearTimeout(e.timeoutId),t.removeAttribute("mx-trigger")}),t.POLLING_INTERVALS=new WeakMap},pollElement(e){let r=t.CORE_MX_ATTRIBUTES.find(t=>e.hasAttribute(t));if(r){let i=parseInt(e.getAttribute("mx-throttle"))||0;if(i>0&&!a.canMakeRequest(i)){console.log("Polling request throttled");return}c.initInvokeHttpRequest(e,r)}else console.log("No polling attribute found on element")},handlePopState(t){let r=e.location.pathname,i=document.querySelector(`[mx-get^="${r}"]`);if(i){let l=new Event("click");i.dispatchEvent(l)}else e.location.reload()}};document.addEventListener("DOMContentLoaded",c.initializeTrongateMX),document.addEventListener("keydown",function e(t){if("Escape"===t.key){let r=document.getElementById("modal-container");r&&closeModal()}}),document.addEventListener("click",e=>{!function e(t){if(trongateMXOpeningModal)return;let r=document.querySelector(".mx-modal-container");if(r){let a=r.querySelector(".modal"),n=a&&!a.contains(t.target),s=a&&a.contains(i),o=a&&a.contains(l);!n||s||o||closeModal()}}(e)}),document.addEventListener("mousedown",e=>{i=e.target}),document.addEventListener("mouseup",e=>{l=e.target}),e.TrongateMX={init:c.initializeTrongateMX,openModal:o.openModal,startPolling:c.startPolling.bind(c),stopPolling:c.stopPolling.bind(c),stopAllPolling:c.stopAllPolling.bind(c)}}(window);const _mxOpenModal=function(e){trongateMXOpeningModal=!0,setTimeout(()=>{trongateMXOpeningModal=!1},333);let t=document.body,r;if(null==document.getElementById("overlay")){let i=document.createElement("div");i.setAttribute("id","modal-container"),i.setAttribute("class","mx-modal-container"),i.setAttribute("style","z-index: 3;"),t.prepend(i);let l=document.createElement("div");l.setAttribute("id","overlay"),l.setAttribute("style","z-index: 2"),t.prepend(l);let a=document.getElementById(e);a.removeAttribute("style"),a.setAttribute("class","modal"),a.setAttribute("id",e),a.style.zIndex=4,i.appendChild(a),setTimeout(()=>{a.style.opacity=1,a.style.marginTop="12vh"},0)}},_mxCloseModal=function(){let e=document.getElementById("modal-container");if(e){let t=e.firstChild;t.style.zIndex=-4,t.style.opacity=0,t.style.marginTop="12vh",t.style.display="none";let r=document.querySelector("body");r.appendChild(t),e.remove();let i=document.getElementById("overlay");i&&i.remove();let l=new Event("modalClosed",{bubbles:!0,cancelable:!0});document.dispatchEvent(l)}};window.openModal=window.openModal||_mxOpenModal,window.closeModal=window.closeModal||_mxCloseModal;