let trongateMXOpeningModal=!1;!function(t){"use strict";const e={CORE_MX_ATTRIBUTES:["mx-get","mx-post","mx-put","mx-delete","mx-patch","mx-remove"],REQUIRES_DATA_ATTRIBUTES:["mx-post","mx-put","mx-patch"],DEFAULT_TIMEOUT:6e4,POLLING_INTERVALS:new WeakMap};let r,o,n=0;const s={parseAttributeValue(t){if(!(t=t.trim()).startsWith("{")&&!t.startsWith("["))return t;try{return JSON.parse(t)}catch(t){return console.error("Error parsing attribute value:",t),!1}},escapeHtml:t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),getAttributeValue(t,e){if(t.hasAttribute(e))return t.getAttribute(e);let r=t.parentElement;for(;r;){if(r.hasAttribute(e))return r.getAttribute(e);r=r.parentElement}return null},parsePollingInterval(t){const e=t.match(/^(\d+)(s|m|h|d)$/);if(!e)return null;const r=parseInt(e[1],10);switch(e[2]){case"s":return 1e3*r;case"m":return 60*r*1e3;case"h":return 60*r*60*1e3;case"d":return 24*r*60*60*1e3}},canMakeRequest(t){const e=Date.now();return e-n>=t&&(n=e,!0)},parseUrlWithPlaceholders:(t,e)=>t.replace(/\$\{([^}]+)\}/g,((t,r)=>"this.value"===r?e.value:t)),pushUrl(e){const r=this.normalizeUrl(e);r&&t.location.href!==r&&history.pushState({},"",r)},getRequestUrl(t){for(const r of e.CORE_MX_ATTRIBUTES){let e=t.getAttribute(r);if(e)return e=this.processDynamicUrl(e,t),this.normalizeUrl(e)}return null},processDynamicUrl:(t,e)=>t.replace(/\${([^}]+)}/g,((t,r)=>"this.value"===r?e.value:t)),normalizeUrl(e){if(e.startsWith("http://")||e.startsWith("https://"))return e;const r=document.querySelector("base"),o=r?r.href:t.location.origin+"/";return e.startsWith(o)?e:(o.endsWith("/")&&e.startsWith("/")&&(e=e.substring(1)),o.replace(/\/?$/,"/")+e.replace(/^\//,""))},createMXEvent(t,e,r,o={}){const n=t.closest("button, form")||t;return{target:n,type:r,detail:{element:n,originalEvent:e,...o}}},executeMXFunction(e,r){if(!e)return;const o=e.replace(/\(\)$/,"");let n;if(o.includes(".")){const[e,r]=o.split("."),s=t[e];if(!s||"object"!=typeof s||!s[r]||"function"!=typeof s[r])return void console.warn(`Object or method not found: ${o}`);n=s[r].bind(s)}else n=t[o];if("function"==typeof n)try{n(r)}catch(t){console.error(`Error executing ${o}:`,t)}else console.warn(`Function ${o} not found`)}},i={setupHttpRequest(t,r){let o=t.getAttribute(r);o=s.parseUrlWithPlaceholders(o,t),o=s.normalizeUrl(o);const n=r.replace("mx-","").toUpperCase();a.attemptActivateLoader(t);const i=new XMLHttpRequest;i.open(n,o),i.setRequestHeader("Trongate-MX-Request","true");const l=t.getAttribute("mx-timeout");if(null!==l){const t=l.toLowerCase();if("none"===t||"0"===t)i.timeout=0;else{const t=parseInt(l,10);!isNaN(t)&&t>0?i.timeout=t:(console.warn("Invalid mx-timeout value, using default timeout"),i.timeout=e.DEFAULT_TIMEOUT)}}else i.timeout=e.DEFAULT_TIMEOUT;return i},setMXHeaders(t,e){const r=e.getAttribute("mx-token");r&&t.setRequestHeader("trongateToken",r);const o=e.getAttribute("mx-headers");if(o){const e=s.parseAttributeValue(o);e&&"object"==typeof e?Object.entries(e).forEach((([e,r])=>{t.setRequestHeader(e,r)})):console.error("Error parsing mx-headers attribute.")}},setMXHandlers(t,e){t.onerror=function(){a.attemptHideLoader(e),console.error("Request failed")},t.ontimeout=function(){a.attemptHideLoader(e),console.warn("HTTP request timed out.");const r=e.getAttribute("mx-on-timeout");if(r){const o=s.createMXEvent(e,event,"timeout",{http:t});s.executeMXFunction(r,o)}}},commonHttpRequest(t,e,r=null){const o=i.setupHttpRequest(t,e);i.setMXHeaders(o,t),i.setMXHandlers(o,t);const n=null!==r;let l;l=n?new FormData(r):new FormData;const c=n&&r.getAttribute("mx-vals")||t.getAttribute("mx-vals");if(c){const t=s.parseAttributeValue(c);t&&"object"==typeof t&&Object.entries(t).forEach((([t,e])=>{l.append(t,e)}))}const d=a.processMXDomVals(t);let u;return Object.entries(d).forEach((([t,e])=>{l.append(t,e)})),u=r&&!t.hasAttribute(e)?a.establishTargetElement(r):a.establishTargetElement(t),a.handleMxDuringRequest(t,u),{http:o,formData:l,targetElement:u}},invokeFormPost(t,e,r,o,n){const{http:s,formData:l,targetElement:c}=i.commonHttpRequest(t,r,o);s.onload=function(){a.attemptHideLoader(o);s.status>=200&&s.status<300&&!t.hasAttribute(r)&&o.reset();const e=t.hasAttribute(r)?t:o;i.handleHttpResponse(s,e,n)};try{s.send(l)}catch(t){a.attemptHideLoader(o),console.error("Error sending form request:",t)}},initInvokeHttpRequest(t,e,r){const o=t.getAttribute("mx-build-modal");if(o){const n=s.parseAttributeValue(o);if(!1===n)return void console.warn("Invalid JSON in mx-build-modal:",o);if("string"==typeof n){const o={id:n};l.buildMXModal(o,t,e,r)}else l.buildMXModal(n,t,e,r)}else i.invokeHttpRequest(t,e,r)},invokeHttpRequest(t,e,r){const{http:o,formData:n,targetElement:l}=i.commonHttpRequest(t,e);o.setRequestHeader("Accept","text/html"),o.onload=function(){if(a.attemptHideLoader(t),i.handleHttpResponse(o,t,r),"true"===t.getAttribute("mx-push-url")&&o.status>=200&&o.status<300){const e=s.getRequestUrl(t);s.pushUrl(e)}};try{o.send(n)}catch(e){a.attemptHideLoader(t),console.error("Error sending request:",e)}},handleHttpResponse(e,r,o){const n="true"===r.getAttribute("mx-redirect-on-success"),i="true"===r.getAttribute("mx-redirect-on-error"),d=e.status>=200&&e.status<300,u=e.responseText.trim();if(!(d&&n||!d&&i)||!u||u.startsWith("{")||u.startsWith("[")||u.includes("<")){if(a.removeCloak(),a.restoreOriginalContent(),a.reEnableDisabledElements(),r.classList.remove("blink"),d){e.getResponseHeader("Content-Type");const t=a.establishTargetElement(r),n=r.getAttribute("mx-select-oob");if(n){const i=document.createDocumentFragment(),l=document.createElement("div");if(l.innerHTML=e.responseText,i.appendChild(l),a.handleOobSwaps(i,n),!t&&r.hasAttribute("mx-after-swap")){const t=r.getAttribute("mx-after-swap");if(t){const n=s.createMXEvent(r,o,"afterSwap",{http:e});s.executeMXFunction(t,n)}}}if(r.getAttribute("mx-animate-success")&&t?c.initAnimateSuccessWithCallback(t,e,r,(()=>{l.initAttemptCloseModal(t,e,r),this.updateContent(t,e,r,o)})):t&&(l.initAttemptCloseModal(t,e,r),this.updateContent(t,e,r,o)),"true"===r.getAttribute("mx-push-url")){const t=s.getRequestUrl(r);s.pushUrl(t)}this.attemptInitOnSuccessActions(e,r)}else this.handleErrorResponse(e,r);a.attemptHideLoader(r)}else t.location.href=s.normalizeUrl(u)},updateContent(t,e,r,o){const n=e.getResponseHeader("Content-Type");if(n.includes("text/html"))a.populateTargetEl(t,e,r);else if(n.includes("application/json"))try{const r=JSON.parse(e.responseText);t.textContent=JSON.stringify(r,null,2)}catch(t){console.error("Error parsing JSON response:",t)}else n.startsWith("image/")?t.style.backgroundImage=`url('${e.responseURL}')`:t.textContent=e.responseText;const i=r.getAttribute("mx-after-swap");if(i){const t=s.createMXEvent(r,o,"afterSwap",{http:e});s.executeMXFunction(i,t)}},handleErrorResponse(t,e){console.error("Request failed with status:",t.status);const r=e.closest("form");r&&this.attemptDisplayValidationErrors(t,e,r);if(e.getAttribute("mx-animate-error"))c.initAnimateError(e,t,e);else{const r=a.establishTargetElement(e);l.initAttemptCloseModal(r,t,e),this.attemptInitOnErrorActions(t,e)}},attemptInitOnErrorActions(t,e){const r=e.getAttribute("mx-on-error");if(r){const t=document.querySelector(r);a.handlePageLoadedEvents(t)}},attemptInitOnSuccessActions(t,e){const r=e.getAttribute("mx-on-success");if(r){const t=document.querySelector(r);a.handlePageLoadedEvents(t)}},attemptDisplayValidationErrors(t,e,r){if(401!==t.status&&402!==t.status&&403!==t.status&&t.status>=400&&t.status<=499)try{if(r.classList.contains("highlight-errors")){const e=JSON.parse(t.responseText);a.handleValidationErrors(r,e)}}catch(t){console.error("Error parsing validation errors:",t)}}},a={processedIndicators:new Set,indicatorObserver:null,initializeIndicatorObserver(){this.indicatorObserver||(this.indicatorObserver=new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{1===t.nodeType&&(t.classList?.contains("mx-indicator")&&this.initializeSingleIndicator(t),t.querySelectorAll?.(".mx-indicator")?.forEach((t=>{this.initializeSingleIndicator(t)})))})),t.removedNodes.forEach((t=>{1===t.nodeType&&(t.classList?.contains("mx-indicator")&&this.processedIndicators.delete(t),t.querySelectorAll?.(".mx-indicator")?.forEach((t=>{this.processedIndicators.delete(t)})),e.POLLING_INTERVALS.has(t)&&d.stopPolling(t))}))}))})),this.indicatorObserver.observe(document.body,{childList:!0,subtree:!0}))},initializeSingleIndicator(t){t&&!this.processedIndicators.has(t)&&(this.hideLoader(t),t.style.display="",this.processedIndicators.add(t))},handleMxDuringRequest(t,e){const r=t.getAttribute("mx-target-loading");if(r)if("cloak"===r)e.style.setProperty("opacity","0","important"),e.classList.add("mx-cloak");else{const t=document.querySelector(r);t&&(e.dataset.mxOriginalContent=e.innerHTML,e.innerHTML=t.innerHTML,e.classList.add("mx-placeholder-active"))}"form"===t.tagName.toLowerCase()&&Array.from(t.elements).forEach((t=>{t.disabled||(t.disabled=!0,t.classList.add("mx-temp-disabled"))}))},establishTargetElement(t){const e=s.getAttributeValue(t,"mx-target");if(!e||"this"===e)return t;if("none"===e)return null;if("body"===e)return document.body;if(e.startsWith("closest ")){const r=e.replace("closest ","");return t.closest(r)}if(e.startsWith("find ")){const r=e.replace("find ","");return t.querySelector(r)}return document.querySelector(e)},attemptActivateLoader(t){const e=t.getAttribute("mx-indicator");if(e){const t=document.querySelector(e);t&&(t.style.removeProperty("display"),t.classList.remove("mx-indicator-hidden"),t.classList.add("mx-indicator"))}},attemptHideLoader(t){const e=s.getAttributeValue(t,"mx-indicator");if(e){const t=document.querySelector(e);t&&a.hideLoader(t)}},hideLoader(t){t&&t.classList.contains("mx-indicator")&&(t.classList.remove("mx-indicator"),t.classList.add("mx-indicator-hidden"))},processMXDomVals(t){const e=t.getAttribute("mx-dom-vals")||t.getAttribute("mx-dom-values");if(!e)return{};const r=s.parseAttributeValue(e);if(!r||"object"!=typeof r)return{};const o={};return Object.entries(r).forEach((([t,e])=>{if("object"==typeof e&&e.selector&&e.property){const r=document.querySelector(e.selector);r&&(o[t]=r[e.property])}})),o},populateTargetEl(t,e,r){const o=r.getAttribute("mx-select"),n=a.establishSwapStr(r),s=r.getAttribute("mx-select-oob"),i=document.createDocumentFragment(),c=document.createElement("div");c.innerHTML=e.responseText,i.appendChild(c);try{a.handleOobSwaps(i,s),a.handleMainSwaps(t,i,o,n),l.attemptAddModalButtons(t,r)}catch(t){console.error("Error in populateTargetEl:",t)}finally{c.innerHTML="",i.textContent=""}},handleMainSwaps(t,e,r,o){(r?e.querySelectorAll(r):[e.firstChild]).forEach((e=>{e&&a.swapContent(t,e,o)}))},handleOobSwaps(t,e){if(!e)return;const r=s.parseAttributeValue(e);if("string"==typeof r){r.split(/,(?![^[]*\])/).forEach((e=>{const[r,o]=e.trim().split(":");this.performOobSwap(t,{select:r,target:o,swap:"innerHTML"})}))}else Array.isArray(r)?r.forEach((e=>this.performOobSwap(t,e))):"object"==typeof r&&null!==r?this.performOobSwap(t,r):console.error("Invalid mx-select-oob syntax:",e)},performOobSwap(t,{select:e,target:r,swap:o="innerHTML"}){const n=t.querySelector(e);if(!n)return void console.error(`Source element not found: ${e}`);const s=document.querySelector(r);s?this.swapContent(s,n.cloneNode(!0),o):console.error(`Target element not found: ${r}`)},swapContent(t,e,r){const o="string"==typeof e?e:e.outerHTML||e.innerHTML,n=this.removeOutermostDiv(o);switch(r){case"outerHTML":t.outerHTML=n;break;case"textContent":t.textContent=n;break;case"beforebegin":t.insertAdjacentHTML("beforebegin",n);break;case"afterbegin":t.insertAdjacentHTML("afterbegin",n);break;case"beforeend":t.insertAdjacentHTML("beforeend",n);break;case"afterend":t.insertAdjacentHTML("afterend",n);break;case"delete":t.remove();break;case"value":"value"in t?t.value=n:(console.warn("Target element does not support value property"),t.innerHTML=n);break;case"none":break;default:t.innerHTML=n}},removeOutermostDiv(t){const e=document.createElement("div");if(e.innerHTML=t.trim(),e.firstElementChild&&"div"===e.firstElementChild.tagName.toLowerCase()){const t=e.firstElementChild;for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}return e.innerHTML},handleValidationErrors(t,e){t.querySelectorAll(".form-field-validation-error").forEach((t=>t.classList.remove("form-field-validation-error"))),t.querySelectorAll(".validation-error-report").forEach((t=>t.remove()));let r=null;e.forEach((e=>{const o=t.querySelector(`[name="${e.field}"]`);if(o){o.classList.add("form-field-validation-error");const n=document.createElement("div");n.className="validation-error-report",e.messages.forEach((t=>{const e=document.createElement("div");e.innerHTML="â— "+s.escapeHtml(t),n.appendChild(e)}));const i=o.closest(".flex-row");if(i&&(t===i||t.contains(i))){let e=null,r=o.previousElementSibling;for(;r&&"label"!==r.tagName.toLowerCase()&&!r.tagName.toLowerCase().match(/(input|select|textarea)/)&&null!==r;)r=r.previousElementSibling;if(r&&"label"===r.tagName.toLowerCase())e.parentNode.insertBefore(n,e.nextSibling);else{const e=o.closest(".flex-row");e&&t.contains(e)?e.parentNode.insertBefore(n,e):t.parentNode.insertBefore(n,t)}}else o.parentNode.insertBefore(n,o);if(r||(r=o),"checkbox"===o.type||"radio"===o.type){let t=o.closest("div");t&&(t.classList.add("form-field-validation-error"),t.style.textIndent="7px")}}})),r&&setTimeout((()=>{r.scrollIntoView({behavior:"smooth",block:"center"})}),100);const o=t.getAttribute("mx-after-validation");if(o){const r=s.createMXEvent(t,event,"afterValidation",{validationErrors:e});s.executeMXFunction(o,r)}},removeCloak(){document.querySelectorAll(".mx-cloak").forEach((t=>{t.classList.remove("mx-cloak"),"0"===t.style.opacity&&t.style.removeProperty("opacity")}))},restoreOriginalContent(){document.querySelectorAll(".mx-placeholder-active").forEach((t=>{t.dataset.mxOriginalContent&&(t.innerHTML=t.dataset.mxOriginalContent,delete t.dataset.mxOriginalContent),t.classList.remove("mx-placeholder-active")}))},reEnableDisabledElements(){document.querySelectorAll(".mx-temp-disabled").forEach((t=>{t.disabled=!1,t.classList.remove("mx-temp-disabled")}))},establishSwapStr:t=>s.getAttributeValue(t,"mx-swap")||"innerHTML",handlePageLoadedEvents(t){const r=e.CORE_MX_ATTRIBUTES.find((e=>t.hasAttribute(e)));r&&(event.preventDefault(),d.initInvokeHttpRequest(t,r))},clearExistingValidationErrors(t){const e=document.querySelector(".validation-error-alert");e&&e.remove(),t.querySelectorAll(".validation-error-report").forEach((t=>t.remove())),t.querySelectorAll(".form-field-validation-error").forEach((t=>t.classList.remove("form-field-validation-error")))},setChildrenOpacity(t,e){const r=parseFloat(e);if(isNaN(r)||r<0||r>1)throw new Error("Invalid opacity value. It must be a number between 0 and 1.");Array.from(t.children).forEach((t=>{t.style.opacity=e}))}},l={buildMXModal(t,e,r,o){e.closest(".modal")&&closeModal();const n="string"==typeof t?t:t.id,s=document.getElementById(n);s&&s.remove();const a=document.createElement("div");if(a.className="modal",a.id=n,a.style.display="none","object"==typeof t&&t.modalHeading){const e=document.createElement("div");e.className="modal-heading";let r=!t.renderCloseIcon||t.renderCloseIcon;if(!1===r||"false"===r)e.innerHTML=t.modalHeading;else{e.classList.add("flex-row"),e.classList.add("align-center"),e.classList.add("justify-between");const r=document.createElement("div");r.innerHTML=t.modalHeading,e.appendChild(r);const o=document.createElement("div");if(null!==document.querySelector('link[href*="font-awesome"]')||null!==document.querySelector(".fa-times")){const t=document.createElement("i");t.classList.add("fa","fa-times"),t.style.cursor="pointer",t.setAttribute("onclick","closeModal()"),o.appendChild(t)}else{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","16"),t.setAttribute("height","16"),t.setAttribute("viewBox","0 0 100 100"),t.setAttribute("fill","currentColor"),t.setAttribute("class","bi bi-x"),t.style.cursor="pointer";const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttribute("transform","rotate(45, 50, 50)");const r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x","38"),r.setAttribute("y","0"),r.setAttribute("width","24"),r.setAttribute("height","100"),r.setAttribute("rx","12"),r.setAttribute("ry","12");const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x","0"),n.setAttribute("y","38"),n.setAttribute("width","100"),n.setAttribute("height","24"),n.setAttribute("rx","12"),n.setAttribute("ry","12"),e.appendChild(r),e.appendChild(n),t.appendChild(e),t.setAttribute("onclick","closeModal()"),o.appendChild(t)}e.appendChild(o)}a.appendChild(e)}const l=document.createElement("div");l.className="modal-body";const c=document.createElement("div");if(c.setAttribute("class","spinner mt-3 mb-3"),l.appendChild(c),a.appendChild(l),"object"==typeof t&&t.modalFooter){const e=document.createElement("div");e.className="modal-footer",e.innerHTML=t.modalFooter,a.appendChild(e)}document.body.appendChild(a),this.openModal(n,t);const d=document.getElementById(n);"object"==typeof t&&t.width&&(d.style.maxWidth=t.width),e.hasAttribute("mx-target")&&e.removeAttribute("mx-target");const u=`#${n} .modal-body`;e.setAttribute("mx-target",u),i.invokeHttpRequest(e,r,o)},attemptAddModalButtons(t,e){if(e.hasAttribute("mx-build-modal")){const r=e.getAttribute("mx-build-modal"),o=s.parseAttributeValue(r);if(!1===o)return void console.warn("Failed to parse mx-build-modal attribute:",r);const n=document.createElement("p");n.setAttribute("class","text-center");let i=!1;if("object"==typeof o){if(o.hasOwnProperty("showCloseButton")){const t=document.createElement("button");t.setAttribute("class","alt"),t.innerText="Close",t.setAttribute("onclick","closeModal()"),n.appendChild(t),i=!0}if(o.hasOwnProperty("showDestroyButton")){const t=document.createElement("button");t.setAttribute("class","alt"),t.innerText="Close",t.addEventListener("click",(function(){l.closeModal();let t=this.closest(".modal");t&&t.remove()})),n.appendChild(t),i=!0}}i&&t.appendChild(n)}},initAttemptCloseModal(e,r,o){if(r.status>=200&&r.status<300){if("true"===o.getAttribute("mx-close-on-success"))return void t.closeModal()}else{"true"===o.getAttribute("mx-close-on-error")&&t.closeModal()}},openModal(t,e){trongateMXOpeningModal=!0,setTimeout((()=>{trongateMXOpeningModal=!1}),333);const r=document.body;let o=document.getElementById("overlay");if(null==o){const o=document.createElement("div");o.setAttribute("id","modal-container"),o.setAttribute("class","mx-modal-container"),o.setAttribute("style","z-index: 3;"),r.prepend(o);const n=document.createElement("div");n.setAttribute("id","overlay"),n.setAttribute("style","z-index: 2"),r.prepend(n);const s=document.getElementById(t);s.removeAttribute("style"),s.setAttribute("class","modal"),s.setAttribute("id",t),s.style.zIndex=4,o.appendChild(s);const i="object"==typeof e&&(e.marginTop||e["margin-top"])||"12vh";setTimeout((()=>{s.style.opacity=1,s.style.marginTop=i}),0)}}},c={initAnimateSuccessWithCallback(t,e,r,o){const n=this.estAnimationContainer(t,r),s=n.children,i=document.createElement("div");i.setAttribute("class","mx-temp-container cloak");for(document.body.appendChild(i);s.length>0;)i.appendChild(s[0]);this.mxDrawBigTick(n),setTimeout((()=>{this.mxDestroyAnimation(n),o&&"function"==typeof o&&o()}),1300)},initAnimateSuccess(t,e,r){this.initAnimateSuccessWithCallback(t,e,r,(()=>{l.initAttemptCloseModal(t,e,r)}))},initAnimateError(t,e,r){const o=this.estAnimationContainer(t,r),n=o.children,s=document.createElement("div");s.setAttribute("class","mx-temp-container cloak");for(document.body.appendChild(s);n.length>0;)s.appendChild(n[0]);this.mxDrawBigCross(o),setTimeout((()=>{this.mxDestroyAnimation(o),l.initAttemptCloseModal(t,e,r)}),1300)},estAnimationContainer(t,e){let r=t;const o=e.closest(".modal");if(o){r=o.querySelector(".modal-body")}else{const t=e.closest("form");t&&(r=t)}return r},mxDrawBigCross(t){const e=document.createElement("div");e.setAttribute("style","display: none");const r=document.createElement("div");r.setAttribute("class","mx-trigger"),e.appendChild(r);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("version","1.1"),o.setAttribute("id","mx-cross"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 37 37"),o.setAttribute("xml:space","preserve"),e.appendChild(o);const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class","mx-circ path"),n.setAttribute("style","fill:none;stroke:#cc0000;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10"),n.setAttribute("d","M30.5,6.5L30.5,6.5c6.6,6.6,6.6,17.4,0,24l0,0c-6.6,6.6-17.4,6.6-24,0l0,0c-6.6-6.6-6.6-17.4,0-24l0,0C13.1-0.2,23.9-0.2,30.5,6.5z"),o.appendChild(n);const s=document.createElementNS("http://www.w3.org/2000/svg","polyline");s.setAttribute("class","mx-tick path"),s.setAttribute("style","fill:none;stroke:#cc0000;stroke-width:3;"),s.setAttribute("points","11.1,10 25.4,27.2"),o.appendChild(s);const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");i.setAttribute("class","mx-cross path"),i.setAttribute("style","fill:none;stroke:#cc0000;stroke-width:3;"),i.setAttribute("points","24.1,10 12.4,27.2"),o.appendChild(i),t.appendChild(e),e.style.display="flex",setTimeout((()=>{document.getElementsByClassName("mx-trigger")[0].classList.add("mx-drawn")}),100)},mxDrawBigTick(t){const e=document.createElement("div");e.setAttribute("style","display: none");const r=document.createElement("div");r.setAttribute("class","mx-trigger"),e.appendChild(r);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("version","1.1"),o.setAttribute("id","mx-tick"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 37 37"),o.setAttribute("xml:space","preserve"),e.appendChild(o);const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class","mx-circ path"),n.setAttribute("style","fill:none;stroke:#007700;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10"),n.setAttribute("d","M30.5,6.5L30.5,6.5c6.6,6.6,6.6,17.4,0,24l0,0c-6.6,6.6-17.4,6.6-24,0l0,0c-6.6-6.6-6.6-17.4,0-24l0,0C13.1-0.2,23.9-0.2,30.5,6.5z"),o.appendChild(n);const s=document.createElementNS("http://www.w3.org/2000/svg","polyline");s.setAttribute("class","mx-tick path"),s.setAttribute("style","fill:none;stroke:#007700;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10;"),s.setAttribute("points","11.6,20 15.9,24.2 26.4,13.8"),o.appendChild(s),t.appendChild(e),e.style.display="flex",setTimeout((()=>{document.getElementsByClassName("mx-trigger")[0].classList.add("mx-drawn")}),100)},mxDestroyAnimation(t){for(;t.firstChild;)t.removeChild(t.firstChild);const e=document.querySelector(".mx-temp-container");if(e){const r=e.children;for(;r.length>0;)t.appendChild(r[0]);e.remove()}}},d={initializeTrongateMX(){a.initializeIndicatorObserver(),document.querySelectorAll(".mx-indicator").forEach((t=>{a.initializeSingleIndicator(t)}));["click","dblclick","change","submit","keyup","keydown","focus","blur","input"].forEach((t=>{document.body.removeEventListener(t,d.handleTrongateMXEvent),document.body.addEventListener(t,d.handleTrongateMXEvent)})),document.querySelectorAll('[mx-trigger*="load"]').forEach(a.handlePageLoadedEvents),d.attemptInitPolling(),t.addEventListener("popstate",d.handlePopState)},async handleTrongateMXEvent(t){const r=t.target.closest("["+e.CORE_MX_ATTRIBUTES.join("],[")+"]");if(!r)return;const o=d.establishTriggerEvent(r);if(o!==t.type)return;t.preventDefault();const n=r.getAttribute("mx-on-trigger");if(n){const e=s.createMXEvent(r,t,"trigger");try{await s.executeMXFunction(n,e)}catch(t){return void console.error(`Error executing ${n}:`,t)}}const i=parseInt(r.getAttribute("mx-throttle"))||0;if(i>0&&!s.canMakeRequest(i))return void console.log("Request throttled");const a=e.CORE_MX_ATTRIBUTES.find((t=>r.hasAttribute(t)));let l=!1;if(a&&"mx-remove"!==a&&(l=!0,"form"!==r.tagName.toLowerCase()&&!r.closest("form")||"mx-get"===a?("select"===r.tagName.toLowerCase()&&"mx-get"===a&&r.getAttribute("mx-trigger"),d.initInvokeHttpRequest(r,a,t)):d.mxSubmitForm(r,o,a,t)),r.hasAttribute("mx-remove")){const t=r.getAttribute("mx-remove");setTimeout((()=>{if("true"===t){const t=r.parentElement;t&&t.remove()}else{const e=r.closest(t);e&&e.remove()}}),0)}l||r.hasAttribute("mx-remove")||("form"!==r.tagName.toLowerCase()&&!r.closest("form")||"mx-get"===a?("select"===r.tagName.toLowerCase()&&"mx-get"===a&&r.getAttribute("mx-trigger"),d.initInvokeHttpRequest(r,a,t)):d.mxSubmitForm(r,o,a,t))},establishTriggerEvent(t){const e=t.getAttribute("mx-trigger");if("activate"===e)return"__ACTIVATE__";if(e)return e;switch(t.tagName.toLowerCase()){case"form":return"submit";case"input":return"text"===t.type?"input":"change";case"textarea":case"select":return"change";default:return"click"}},mxSubmitForm(t,r,o,n){const s=t.closest("form");s?(a.clearExistingValidationErrors(s),e.REQUIRES_DATA_ATTRIBUTES.includes(o)?i.invokeFormPost(t,r,o,s,n):d.initInvokeHttpRequest(s,o,n)):console.error("No containing form found")},initInvokeHttpRequest(t,e){const r=t.getAttribute("mx-build-modal");if(r){const o=s.parseAttributeValue(r);if(!1===o)return void console.warn("Invalid JSON in mx-build-modal:",r);if("string"==typeof o){const r={id:o};l.buildMXModal(r,t,e)}else l.buildMXModal(o,t,e)}else i.invokeHttpRequest(t,e)},attemptInitPolling(){document.querySelectorAll("[mx-trigger]").forEach((t=>{const e=t.getAttribute("mx-trigger");d.setupPolling(t,e)}))},setupPolling(t,r){d.stopPolling(t);const o=r.match(/^every\s+(\d+[smhd])$/);if(o){const r=s.parsePollingInterval(o[1]);if(r){const o=setInterval((()=>d.pollElement(t)),r);e.POLLING_INTERVALS.set(t,o)}return}const n=r.match(/^load\s+delay:(\d+[smhd])$/);if(n){const r=s.parsePollingInterval(n[1]);if(r){const o=setTimeout((()=>{d.pollElement(t);const o=setInterval((()=>d.pollElement(t)),r);e.POLLING_INTERVALS.set(t,o)}),r);e.POLLING_INTERVALS.set(t,{timeoutId:o})}return}const i=r.match(/^load\s+delay:(\d+[smhd]),\s*every\s+(\d+[smhd])$/);if(i){const r=s.parsePollingInterval(i[1]),o=s.parsePollingInterval(i[2]);if(r&&o){const n=setTimeout((()=>{d.pollElement(t);const r=setInterval((()=>d.pollElement(t)),o);e.POLLING_INTERVALS.set(t,r)}),r);e.POLLING_INTERVALS.set(t,{timeoutId:n})}}else;},startPolling(t,r="5s"){if(!t)return console.error("startPolling: No element provided"),!1;d.stopPolling(t);const o=s.parsePollingInterval(r);if(!o)return console.error(`startPolling: Invalid interval format: ${r}`),!1;["mx-get","mx-select-oob","mx-target"].forEach((e=>{t.hasAttribute(e)&&t.setAttribute(`data-original-${e}`,t.getAttribute(e))})),t.setAttribute("mx-trigger","polling");const n=setInterval((()=>d.pollElement(t)),o);return e.POLLING_INTERVALS.set(t,n),t.setAttribute("data-polling-active","true"),!0},stopPolling(t){const r=e.POLLING_INTERVALS.get(t);if(r){"number"==typeof r?clearInterval(r):r&&"object"==typeof r&&r.timeoutId&&clearTimeout(r.timeoutId),e.POLLING_INTERVALS.delete(t);return["mx-get","mx-select-oob","mx-target"].forEach((e=>{const r=`data-original-${e}`;t.hasAttribute(r)&&(t.setAttribute(e,t.getAttribute(r)),t.removeAttribute(r))})),t.hasAttribute("data-original-mx-trigger")?(t.setAttribute("mx-trigger",t.getAttribute("data-original-mx-trigger")),t.removeAttribute("data-original-mx-trigger")):t.removeAttribute("mx-trigger"),t.removeAttribute("data-polling-active"),!0}return!1},stopAllPolling(){e.POLLING_INTERVALS.forEach(((t,e)=>{"number"==typeof t?clearInterval(t):t&&"object"==typeof t&&t.timeoutId&&clearTimeout(t.timeoutId),e.removeAttribute("mx-trigger")})),e.POLLING_INTERVALS=new WeakMap},pollElement(t){const r=e.CORE_MX_ATTRIBUTES.find((e=>t.hasAttribute(e)));if(r){const e=parseInt(t.getAttribute("mx-throttle"))||0;if(e>0&&!s.canMakeRequest(e))return void console.log("Polling request throttled");d.initInvokeHttpRequest(t,r)}else console.log("No polling attribute found on element")},handlePopState(e){const r=t.location.pathname,o=document.querySelector(`[mx-get^="${r}"]`);if(o){const t=new Event("click");o.dispatchEvent(t)}else t.location.reload()}};document.addEventListener("DOMContentLoaded",d.initializeTrongateMX),document.addEventListener("keydown",(function(t){if("Escape"===t.key){document.getElementById("modal-container")&&closeModal()}})),document.addEventListener("click",(t=>{!function(t){if(trongateMXOpeningModal)return;const e=document.querySelector(".mx-modal-container");if(e){const n=e.querySelector(".modal"),s=n&&!n.contains(t.target),i=n&&n.contains(r),a=n&&n.contains(o);!s||i||a||closeModal()}}(t)})),document.addEventListener("mousedown",(t=>{r=t.target})),document.addEventListener("mouseup",(t=>{o=t.target})),t.TrongateMX={init:d.initializeTrongateMX,openModal:l.openModal,startPolling:d.startPolling.bind(d),stopPolling:d.stopPolling.bind(d),stopAllPolling:d.stopAllPolling.bind(d)}}(window);const _mxOpenModal=function(t){trongateMXOpeningModal=!0,setTimeout((()=>{trongateMXOpeningModal=!1}),333);const e=document.body;let r=document.getElementById("overlay");if(null==r){const r=document.createElement("div");r.setAttribute("id","modal-container"),r.setAttribute("class","mx-modal-container"),r.setAttribute("style","z-index: 3;"),e.prepend(r);const o=document.createElement("div");o.setAttribute("id","overlay"),o.setAttribute("style","z-index: 2"),e.prepend(o);const n=document.getElementById(t);n.removeAttribute("style"),n.setAttribute("class","modal"),n.setAttribute("id",t),n.style.zIndex=4,r.appendChild(n),setTimeout((()=>{n.style.opacity=1,n.style.marginTop="12vh"}),0)}},_mxCloseModal=function(){const t=document.getElementById("modal-container");if(t){const e=t.firstChild;e.style.zIndex=-4,e.style.opacity=0,e.style.marginTop="12vh",e.style.display="none";document.querySelector("body").appendChild(e),t.remove();const r=document.getElementById("overlay");r&&r.remove();const o=new Event("modalClosed",{bubbles:!0,cancelable:!0});document.dispatchEvent(o)}};window.openModal=window.openModal||_mxOpenModal,window.closeModal=window.closeModal||_mxCloseModal;